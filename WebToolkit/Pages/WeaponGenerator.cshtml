@page
@model WebToolkit.Pages.WeaponGeneratorModel
@{
    ViewData["Title"] = "Weapon Generator";
}

@section Scripts
{
    <script src="~/js/WeaponGenerator.js" type="text/javascript"></script>
    <script type="text/javascript">
        function callGenerator(finalData) {
            $.ajax({
                url: '@(Url.Action("GenerateWeapon", "Weapon"))/',
                data: {
                    json: JSON.stringify(finalData)
                },
                type: "POST",
                dataType: "json",
                statusCode: {
                    200: function (result) {
                        $("#txtResults").val(result.responseText);
                        if (typeof (mdlGenerate) === 'undefined') {
                            mdlGenerate = new bootstrap.Modal(document.getElementById('mdlGenerate'));
                        }
                        mdlGenerate.show();
                    },
                    500: function (jqXHR) {
                        alert(jqXHR.responseText);
                    }
                }
            });
        }
        function _arrayBufferToBase64(buffer) {
            var binary = '';
            var bytes = new Uint8Array(buffer);
            var len = bytes.byteLength;
            for (var i = 0; i < len; i++) {
                binary += String.fromCharCode(bytes[i]);
            }
            return window.btoa(binary);
        }
        function massGenerate() {
            $("body").css("cursor", "progress");
            var rdr = new FileReader();
            rdr.readAsArrayBuffer($("#iptLoadXlsxFile").prop("files")[0]);
            rdr.onload = function (evt) {
                var loadedData = _arrayBufferToBase64(evt.target.result);
                $.ajax({
                    url: '@(Url.Action("MassGenerateWeapons", "Weapon"))/',
                    data: { data: loadedData, game: $("#ddlGameSelect").val() },
                    type: "POST",
                    dataType: "json",
                    statusCode: {
                        200: function (result) {
                            $("body").css("cursor", "default");
                            var link = document.createElement("a");
                            link.download = "WeaponsExport.zip";
                            link.href = 'data:application/zip;base64,' + encodeURIComponent(result.responseText);
                            link.click();
                            link.remove();
                        },
                        500: function (jqXHR) {
                            $("body").css("cursor", "default");
                            alert(jqXHR.responseText);
                        }
                    }
                });
            }
            rdr.onerror = function (evt) {
                alert("There was an error with your ZIP file!");
            }
        }
    </script>
}
<div class="container-fluid" style="height: 97vh">
    <div class="row pt-1 m-auto p-auto">
        <div class="col" id="divMainCol">
            <div class="row py-1">
                <div class="col-6">
                    <h4>General Fields</h4>
                </div>
                <div class="col">
                    <div class="float-end">
                        <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#mdlXlsxUpload" title="Upload an Excel file for mass-processing."><i class="bi bi-file-earmark-spreadsheet"></i></button>
                        <button type="button" onclick="save()" class="btn btn-success" title="Save your progress to your local machine to reload later."><i class="bi bi-floppy"></i></button>
                        <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#mdlLoad" title="Load previously saved progress."><i class="bi bi-upload"></i></button>
                        <button type="button" onclick="generateWeapon();" class="btn btn-primary btn-generate-wiki-data" title="When finished, click here to generate the final product.">Generate Weapon</button>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mdlHelp" title="Help"><i class="bi bi-question-circle"></i></button>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mdlChangeLog" title="View Change Log"><i class="bi bi-info-circle"></i></button>
                    </div>
                </div>
            </div>
            <div class="row pt-2">
                <div class="col-2">
                    <label for="txtWeaponName">Weapon Name</label>
                    <input type="text" id="txtWeaponName" class="w-100 form-control weapon-name-input data-value" data-label="name" />
                </div>
                <div class="col-2">
                    <label for="ddlGameSelect">Game</label>
                    <select class="form-control form-select weapon-game-input data-value" onchange="updateIcons();" id="ddlGameSelect" data-label="game">
                        <option value="MHWI">Monster Hunter World: Iceborne</option>
                        <option value="MHRS">Monster Hunter Rise: Sunbreak</option>
                        <option value="MHWilds">Monster Hunter Wilds</option>
                    </select>
                </div>
                <div class="col-2">
                    <label for="ddlIconSelect">Weapon Type</label>
                    <select class="form-control form-select weapon-type-input data-value" onchange="updateWeaponFields();" id="ddlIconSelect" data-label="type">
                        <option value=""></option>
                    </select>
                </div>
                <div class="col-2">
                    <label>Tree</label>
                    <input type="text" class="form-control weapon-tree-input data-value" data-label="tree" />
                </div>
                <div class="col-2">
                    <label>Rarity</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-rarity-input data-value" data-label="rarity" />
                </div>
                <div class="col-1">
                    <label>Forge Cost</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-forge-cost-input data-value" data-label="forge-cost" />
                </div>
                <div class="col-1">
                    <label>Forge Materials</label>
                    <br />
                    <input class="form-control weapon-forge-materials-input data-value" hidden="hidden" type="text" data-label="forge-materials" />
                    <button class="btn btn-primary" type="button" onclick="modifyUpgradeMaterials(validateComplexData, this, $(this).parent().children('input').first(), validateMaterials);">Modify</button>
                </div>
            </div>
            <div class="row pt-2">
                <div class="col-2">
                    <label>Attack</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-attack-input data-value" data-label="attack" />
                </div>
                <div class="col-2">
                    <label>Defense</label>
                    <input type="text" class="form-control weapon-defense-input data-value" data-label="defense" />
                </div>
                <div class="col-2">
                    <label>Affinity</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-affinity-input data-value" data-label="affinity" />
                </div>
                <div class="col">
                    <label>Rollback?</label>
                    <select class="form-control form-select weapon-rollback-input data-value" data-label="rollback">
                        <option value=""></option>
                        <option value="Wyvernheart">Yes</option>
                        <option value="Wyvernsnipe">No</option>
                    </select>
                </div>
                <div class="col">
                    <label>Sharpness</label>
                    <br />
                    <input class="form-control weapon-sharpness-input data-value" hidden="hidden" type="text" data-label="sharpness" />
                    <button class="btn btn-primary" type="button" onclick="modifySharpness(validateComplexData, this, $(this).parent().children('input').first(), validateSharpness);">Modify</button>
                </div>
            </div>
            <div class="row pt-2">
                <div class="col-2">
                    <label>Element</label>
                    <select class="form-control form-select weapon-element-1-input data-value" data-label="element-1">
                        <option value=""></option>
                        <option value="Fire">Fire</option>
                        <option value="Water">Water</option>
                        <option value="Thunder">Thunder</option>
                        <option value="Dragon">Dragon</option>
                        <option value="Ice">Ice</option>
                        <option value="Poison">Poison</option>
                        <option value="Paralysis">Para</option>
                        <option value="Sleep">Sleep</option>
                        <option value="Blast">Blast</option>
                    </select>
                </div>
                <div class="col-2">
                    <label>Element Damage</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-element-1-dmg-input data-value" data-label="element-1-dmg" />
                </div>
                <div class="col-2">
                    <label>Element 2</label>
                    <select class="form-control form-select weapon-element-2-input data-value" data-label="element-2">
                        <option value=""></option>
                        <option value="Fire">Fire</option>
                        <option value="Water">Water</option>
                        <option value="Thunder">Thunder</option>
                        <option value="Dragon">Dragon</option>
                        <option value="Ice">Ice</option>
                        <option value="Poison">Poison</option>
                        <option value="Paralysis">Para</option>
                        <option value="Sleep">Sleep</option>
                        <option value="Blast">Blast</option>
                    </select>
                </div>
                <div class="col-2">
                    <label>Element 2 Damage</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-element-2-dmg-input data-value" data-label="element-dmg-2" />
                </div>
            </div>
            <div class="row pt-2">
                <div class="col">
                    <label>Description</label>
                    <textarea class="form-control weapon-description-input data-value" data-label="description"></textarea>
                </div>
                <div class="col-2">
                    <label>Level 1 Deco Slots</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-decos-1-input data-value" data-label="decos-1" />
                </div>
                <div class="col-2">
                    <label>Level 2 Deco Slots</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-decos-2-input data-value" data-label="decos-2" />
                </div>
                <div class="col-2">
                    <label>Level 3 Deco Slots</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-decos-3-input data-value" data-label="decos-3" />
                </div>
                <div class="col-2">
                    <label>Level 4 Deco Slots</label>
                    <input type="number" onblur="validateInput(this);" class="form-control weapon-decos-4-input data-value" data-label="decos-4" />
                </div>
            </div>
            <div class="row pt-2">
                <div class="col-2">
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-6 scrollable-col">
                    <div class="row pb-3">
                        <div class="col-6">
                            <h4>Game-Specific Fields</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 hide-on-invalid-game" data-valid-games="MHWI">
                            <label>Elderseal</label>
                            <select class="form-control form-select weapon-elderseal-input data-value" data-label="elderseal">
                                <option value=""></option>
                                <option value="Low">Low</option>
                                <option value="Average">Average</option>
                                <option value="High">High</option>
                            </select>
                        </div>
                        <div class="col-6 hide-on-invalid-game" data-valid-games="MHWilds,MHWI">
                            <label>Armor Skills</label>
                            <input type="text" class="form-control weapon-armor-skills-input data-value" data-label="armor-skills" />
                        </div>
                        <div class="col-6 hide-on-invalid-game" data-valid-games="MHRS">
                            <label>Rampage Skill Slots</label>
                            <input type="text" class="form-control weapon-rampage-skill-slots-input data-value" data-label="rampage-skill-slots" />
                        </div>
                        <div class="col-6 hide-on-invalid-game" data-valid-games="MHRS">
                            <label>Rampage Decoration Level</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-rampage-decoration-input data-value" data-label="rampage-decoration" />
                        </div>
                    </div>
                    <div class="row pt-5 pb-3">
                        <div class="col-6">
                            <h4>Weapon-Specific Fields</h4>
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="HH">
                        <div class="col-4">
                            <label>Note 1</label>
                            <input type="text" class="form-control weapon-hh-note-1-input data-value" data-label="hh-note-1" />
                        </div>
                        <div class="col-4">
                            <label>Note 2</label>
                            <input type="text" class="form-control weapon-hh-note-2-input data-value" data-label="hh-note-2" />
                        </div>
                        <div class="col-4">
                            <label>Note 3</label>
                            <input type="text" class="form-control weapon-hh-note-3-input data-value" data-label="hh-note-3" />
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="GL">
                        <div class="col-6">
                            <label>Shelling Type</label>
                            <select class="form-control form-select weapon-gl-shelling-type-input data-value" data-label="gl-shelling-type">
                                <option value=""></option>
                                <option value="Normal">Normal</option>
                                <option value="Long">Long</option>
                                <option value="Wide">Wide</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <label>Shelling Level</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-gl-shelling-level-input data-value" data-label="gl-shelling-level" />
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="SA">
                        <div class="col-6">
                            <label>Phial Type</label>
                            <select class="form-control form-select weapon-sa-phial-type-input data-value" data-label="sa-phial-type">
                                <option value=""></option>
                                <option value="Dragon">Dragon</option>
                                <option value="Elemental">Elemental</option>
                                <option value="Para">Para</option>
                                <option value="Power">Power</option>
                            </select>
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="CB">
                        <div class="col-6">
                            <label>Phial Type</label>
                            <select class="form-control form-select weapon-cb-phial-type-input data-value" data-label="cb-phial-type">
                                <option value=""></option>
                                <option value="Element">Element</option>
                                <option value="Impact">Impact</option>
                            </select>
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="IG">
                        <div class="col-6">
                            <label>Kinsect Bonus</label>
                            <select class="form-control form-select weapon-ig-kinsect-bonus-input data-value" data-label="ig-kinsect-bonus">
                                <option value=""></option>
                                <option value="Blunt Boost">Blunt Boost</option>
                                <option value="Element Boost">Element Boost</option>
                                <option value="Health Boost">Health Boost</option>
                                <option value="Sever Boost">Sever Boost</option>
                                <option value="Speed Boost">Speed Boost</option>
                            </select>
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="Bo">
                        <div class="col-6">
                            <label>Bow Coatings</label>
                            <input type="text" class="form-control weapon-bo-coatings-input data-value" data-label="bo-coatings" />
                        </div>
                    </div>
                    <div class="row hide-on-invalid-weapon" data-valid-weapon="HBG">
                        <div class="col-6">
                            <label>Special Ammo Type</label>
                            <select class="form-control form-select weapon-hbg-special-ammo-type-input data-value" data-label="hbg-special-ammo-type">
                                <option value=""></option>
                                <option value="Wyvernheart">Wyvernheart</option>
                                <option value="Wyvernsnipe">Wyvernsnipe</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-6 scrollable-col" style="border-left:2px solid white">
                    <div class="row pb-3">
                        <div class="col">
                            <h4>Previous Weapon in Tree</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            <label>Name</label>
                            <input type="text" class="form-control weapon-previous-name-input data-value" data-label="previous-name" />
                        </div>
                        <div class="col-2">
                            <label>Rarity</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-previous-rarity-input data-value" data-label="previous-rarity" />
                        </div>
                        <div class="col-2">
                            <label>Cost</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-upgrade-cost-input data-value" data-label="upgrade-cost" />
                        </div>
                        <div class="col-1">
                            <label>Materials</label>
                            <br />
                            <input class="form-control weapon-upgrade-materials-input data-value" hidden="hidden" type="text" data-label="upgrade-materials" />
                            <button class="btn btn-primary" type="button" onclick="modifyUpgradeMaterials(validateComplexData, this, $(this).parent().children('input').first(), validateMaterials);">Modify</button>
                        </div>
                    </div>
                    <div class="row py-3">
                        <div class="col">
                            <h4>Next Weapon 1</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            <label>Name</label>
                            <input type="text" class="form-control weapon-next-1-name-input data-value" data-label="next-1-name" />
                        </div>
                        <div class="col-2">
                            <label>Rarity</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-1-rarity-input data-value" data-label="next-1-rarity" />
                        </div>
                        <div class="col-2">
                            <label>Cost</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-1-cost-input data-value" data-label="next-1-cost" />
                        </div>
                        <div class="col-1">
                            <label>Materials</label>
                            <br />
                            <input class="form-control weapon-next-1-materials-input data-value" hidden="hidden" type="text" data-label="next-1-materials" />
                            <button class="btn btn-primary" type="button" onclick="modifyUpgradeMaterials(validateComplexData, this, $(this).parent().children('input').first(), validateMaterials);">Modify</button>
                        </div>
                    </div>
                    <div class="row py-3">
                        <div class="col">
                            <h4>Next Weapon 2</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            <label>Name</label>
                            <input type="text" class="form-control weapon-next-2-name-input data-value" data-label="next-2-name" />
                        </div>
                        <div class="col-2">
                            <label>Rarity</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-2-rarity-input data-value" data-label="next-2-rarity" />
                        </div>
                        <div class="col-2">
                            <label>Cost</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-2-cost-input data-value" data-label="next-2-cost" />
                        </div>
                        <div class="col-1">
                            <label>Materials</label>
                            <br />
                            <input class="form-control weapon-next-2-materials-input data-value" hidden="hidden" type="text" data-label="next-2-materials" />
                            <button class="btn btn-primary" type="button" onclick="modifyUpgradeMaterials(validateComplexData, this, $(this).parent().children('input').first(), validateMaterials);">Modify</button>
                        </div>
                    </div>
                    <div class="row py-3">
                        <div class="col">
                            <h4>Next Weapon 3</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            <label>Name</label>
                            <input type="text" class="form-control weapon-next-3-name-input data-value" data-label="next-3-name" />
                        </div>
                        <div class="col-2">
                            <label>Rarity</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-3-rarity-input data-value" data-label="next-3-rarity" />
                        </div>
                        <div class="col-2">
                            <label>Cost</label>
                            <input type="number" onblur="validateInput(this);" class="form-control weapon-next-3-cost-input data-value" data-label="next-3-cost" />
                        </div>
                        <div class="col-1">
                            <label>Materials</label>
                            <br />
                            <input class="form-control weapon-next-3-materials-input data-value" hidden="hidden" type="text" data-label="next-3-materials" />
                            <button class="btn btn-primary" type="button" onclick="modifyUpgradeMaterials(validateComplexData, this, $(this).parent().children('input').first(), validateMaterials);">Modify</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade extra-modals" id="mdlXlsxUpload" tabindex="-1" aria-labelledby="mdlXlsxUpload" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mdlXlsxUpload">Mass Generate</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 78vh; overflow-y:auto;">
                <div class="row">
                    <div class="col-10">
                        <label for="iptLoadXlsxFile" class="form-label">Load File</label>
                        <input class="form-control" type="file" id="iptLoadXlsxFile" />
                    </div>
                    <div class="col" style="align-content:end;">
                        <button class="btn btn-success" onclick="massGenerate()" type="button">Load File</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mdlHelp" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="helpModalLabel">Help</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                This tool creates weapon pages for the <a target="_blank" href="https://monsterhunterwiki.org/wiki/Main_Page">Monster Hunter wiki</a>. <br> <br>

                Once every item has been filled out accordingly, click "Generate Weapon" on the top right, and your completed template will appear in a popup textbox. You can click the clipboard (<span class="bi bi-clipboard"></span>) icon in the top-right of the popup to automatically copy the contents of the results box to your device's clipboard.<br> <br>
                Simply paste that data into the appropriate area of the page, and you're done!<br> <br>
                If, at any point, you need to reorder any of the items, you can click and hold on the drag handles (<span class="bi bi-arrows-move"></span>) on the left of each of them and drag them to the appropriate place.<br /><br />
                If you need to take a break, feel free to click the green save (<span class="bi bi-floppy"></span>) button in the top right. A file will be downloaded with your save data in it. When you come back, click the yellow load (<span class="bi bi-upload"></span>) button in the top right and navigate to your file. Click "Load", then you're ready to go!
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mdlGenerate" tabindex="-1" aria-labelledby="generateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="generateModalLabel">Generated Table</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row py-1">
                    <div class="col">
                        <label for="txtResults" class="text-bottom">Complete Weapon Source</label>
                        <button class="btn btn-primary bi bi-clipboard float-end" title="Copy contents of table results." onclick="copyToClipboard();"></button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <textarea id="txtResults" style="height:200px;" class="w-100 form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mdlChangeLog" tabindex="-1" aria-labelledby="changeLogModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeLogModalLabel">Change Log</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 78vh; overflow-y:auto;">
                <div class="row">
                    <div class="col">
                        <p>Ping or message @@rampagerobot on Discord if you have any issues.</p>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col">
                        <div class="card">
                            <div class="card-header">
                                <h4>v1.0.0</h4>
                            </div>
                            <div class="card-body">
                                <h6>Initial release. Allows for weapon generation.</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade extra-modals" id="mdlModifySharpness" tabindex="-1" aria-labelledby="mdlModifySharpnessLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mdlModifySharpnessLabel">Modify Sharpness</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 78vh; overflow-y:auto;">
                <div class="row">
                    <div class="col">
                        <h5>First Bar</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Red Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtRedSharpnessHits1" />
                    </div>
                    <div class="col-6">
                        <label>Orange Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtOrangeSharpnessHits1" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Yellow Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtYellowSharpnessHits1" />
                    </div>
                    <div class="col-6">
                        <label>Green Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtGreenSharpnessHits1" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Blue Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtBlueSharpnessHits1" />
                    </div>
                    <div class="col-6">
                        <label>White Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtWhiteSharpnessHits1" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Purple Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('1');" id="txtPurpleSharpnessHits1" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Preview:</label>
                        <div style="display:flex;flex-direction:column;align-items:center" id="divPreviewBar1">
                            <div class="mw-no-invert" style="background-color:black;width:300px;height:30px;border-collapse:collapse;border:1px solid black;margin: auto;display:flex;flex-direction:row;flex-wrap:nowrap">
                                <div style="background-color:#E41700;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#F36A01;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#FBFF00;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#49DD79;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#3E6AFF;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#E6E6E5;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#E401C8;height: inherit;flex:0 0 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-6">
                        <h5>Second Bar</h5>
                    </div>
                    <div class="col-6" style="display: flex;justify-content: flex-end;">
                        <button type="button" onclick="duplicateSharpness()" class="btn btn-primary" title="Duplicate first bar sharpness in the second bar."><i class="bi bi-copy"></i></button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Red Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtRedSharpnessHits2" />
                    </div>
                    <div class="col-6">
                        <label>Orange Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtOrangeSharpnessHits2" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Yellow Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtYellowSharpnessHits2" />
                    </div>
                    <div class="col-6">
                        <label>Green Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtGreenSharpnessHits2" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Blue Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtBlueSharpnessHits2" />
                    </div>
                    <div class="col-6">
                        <label>White Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtWhiteSharpnessHits2" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Purple Sharpness Hits</label>
                        <input type="number" onblur="validateInput(this);" class="form-control" onchange="updatePreviewBar('2');" id="txtPurpleSharpnessHits2" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Preview:</label>
                        <div style="display:flex;flex-direction:column;align-items:center" id="divPreviewBar2">
                            <div class="mw-no-invert" style="background-color:black;width:300px;height:30px;border-collapse:collapse;border:1px solid black;margin: auto;display:flex;flex-direction:row;flex-wrap:nowrap">
                                <div style="background-color:#E41700;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#F36A01;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#FBFF00;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#49DD79;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#3E6AFF;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#E6E6E5;height: inherit;flex:0 0 0%"></div>
                                <div style="background-color:#E401C8;height: inherit;flex:0 0 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="applySharpness();">Apply</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade extra-modals" id="mdlModifyMaterials" tabindex="-1" aria-labelledby="mdlModifyMaterialsLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mdlModifyMaterialsLabel">Modify Materials</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 78vh; overflow-y:auto;">
                <div class="row">
                    <div class="col">
                        <h5>Materials</h5>
                    </div>
                    <div class="col">
                        <button class="btn btn-primary float-end" onclick="addRow();">Add New Material</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <table class="table table-striped table-dark material-table">
                            <thead>
                                <tr style="vertical-align:middle;" data-template="header">
                                    <th scope="col" style="width:0.375rem">Move</th>
                                    <th scope="col" style="width:auto">Name</th>
                                    <th scope="col" style="width:10rem;">Icon</th>
                                    <th scope="col" style="width:10rem;">Icon Color</th>
                                    <th scope="col" style="width:6rem;">Quantity</th>
                                    <th scope="col" style="width:0.375rem">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="vertical-align:middle;" class="table-content-row" ondragend="dragend(event)" ondragover="row_dragover(event)" ondragstart="row_start(event)" data-template="row">
                                    <td class="ignore-generate" style="text-align:center">
                                        <button type="button" onmousedown="$(this).parent().parent().attr('draggable', true);" class="btn btn-primary btn-drag-row" title="Drag this button to move this material."><i class="bi bi-arrows-move"></i></button>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control material-name-input data-value" data-label="name" />
                                    </td>
                                    <td>
                                        <select class="form-control form-select material-icon-input data-value" data-label="icon">
                                            <option value=""></option>
                                            <option value="Armor Sphere">Armor Sphere</option>
                                            <option value="Ball">Ball</option>
                                            <option value="Bone">Bone</option>
                                            <option value="Bug">Bug</option>
                                            <option value="Charm">Charm</option>
                                            <option value="Claw">Claw</option>
                                            <option value="Dung">Dung</option>
                                            <option value="Decoration">Decoration</option>
                                            <option value="Head">Head</option>
                                            <option value="Hide">Hide</option>
                                            <option value="Meat">Meat</option>
                                            <option value="Medicine">Medicine</option>
                                            <option value="Monster Part">Monster Part</option>
                                            <option value="Ore">Ore</option>
                                            <option value="Pallium">Pallium</option>
                                            <option value="Plate">Plate</option>
                                            <option value="Sac">Sac</option>
                                            <option value="Scale">Scale</option>
                                            <option value="Shell">Shell</option>
                                            <option value="Streamstone">Streamstone</option>
                                            <option value="Tail">Tail</option>
                                            <option value="Webbing">Webbing</option>
                                            <option value="Wing">Wing</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control form-select material-color-input data-value" data-label="color">
                                            <option value=""></option>
                                            <option value="Blue">Blue</option>
                                            <option value="Brown">Brown</option>
                                            <option value="Dark Blue">Dark Blue</option>
                                            <option value="Dark Purple">Dark Purple</option>
                                            <option value="Emerald">Emerald</option>
                                            <option value="Gray">Gray</option>
                                            <option value="Green">Green</option>
                                            <option value="Lemon">Lemon</option>
                                            <option value="Light Blue">Light Blue</option>
                                            <option value="Light Green">Light Green</option>
                                            <option value="Moss">Moss</option>
                                            <option value="Orange">Orange</option>
                                            <option value="Pink">Pink</option>
                                            <option value="Purple">Purple</option>
                                            <option value="Red">Red</option>
                                            <option value="Rose">Rose</option>
                                            <option value="Tan">Tan</option>
                                            <option value="Vermilion">Vermilion</option>
                                            <option value="Violet">Violet</option>
                                            <option value="White">White</option>
                                            <option value="Yellow">Yellow</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="number" onblur="validateInput(this);" class="form-control material-quantity-input data-value" data-label="quantity" />
                                    </td>
                                    <td class="ignore-generate" style="text-align:center">
                                        <button type="button" onclick="$(this).parent().parent().remove();" class="btn btn-danger btn-delete-row" title="Delete this material."><i class="bi bi-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="applyMaterials();">Apply</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>